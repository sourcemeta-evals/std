{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ISO 8601-1:2019 Calendar Duration (Extended Format)",
  "description": "A duration expressed in calendar units (years, months, days) using extended format",
  "$comment": "https://www.iso.org/standard/70907.html",
  "examples": [ "P1Y", "P2M", "P15D", "P1Y2M", "P1Y15D", "P2M15D", "P1Y2M15D" ],
  "x-license": "https://github.com/sourcemeta/std/blob/main/LICENSE",
  "type": "string",
  "not": {
    "anyOf": [
      {
        "$comment": "Reject empty duration (P with no components)",
        "pattern": "^P$"
      },
      {
        "$comment": "Reject February with 30 days",
        "pattern": "^P(?:[0-9]+Y)?2M30D$"
      },
      {
        "$comment": "Reject February with 31 days",
        "pattern": "^P(?:[0-9]+Y)?2M31D$"
      },
      {
        "$comment": "Reject April with 31 days",
        "pattern": "^P(?:[0-9]+Y)?4M31D$"
      },
      {
        "$comment": "Reject June with 31 days",
        "pattern": "^P(?:[0-9]+Y)?6M31D$"
      },
      {
        "$comment": "Reject September with 31 days",
        "pattern": "^P(?:[0-9]+Y)?9M31D$"
      },
      {
        "$comment": "Reject November with 31 days",
        "pattern": "^P(?:[0-9]+Y)?11M31D$"
      },
      {
        "$comment": "Reject any month with more than 31 days",
        "pattern": "^P(?:[0-9]+Y)?(?:[0-9]+M)?(?:3[2-9]|[4-9][0-9]|[1-9][0-9]{2,})D$"
      },
      {
        "$comment": "Reject month values greater than 12",
        "pattern": "^P(?:[0-9]+Y)?(?:1[3-9]|[2-9][0-9]|[1-9][0-9]{2,})M"
      },
      {
        "$comment": "Reject day value of 0",
        "pattern": "^P(?:[0-9]+Y)?(?:[0-9]+M)?0D$"
      },
      {
        "$comment": "Reject month value of 0",
        "pattern": "^P(?:[0-9]+Y)?0M"
      }
    ]
  },
  "pattern": "^P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?$",
  "minLength": 2
}
