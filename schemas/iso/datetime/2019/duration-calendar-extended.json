{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ISO 8601-1:2019 Calendar Duration (Extended Format)",
  "description": "A duration in ISO 8601-1:2019 calendar format (extended) with validation for invalid month/day combinations",
  "$comment": "https://www.iso.org/standard/70907.html",
  "examples": [ "P1Y", "P2M", "P3D", "P1Y2M", "P1Y3D", "P2M15D", "P1Y2M15D" ],
  "x-license": "https://github.com/sourcemeta/std/blob/main/LICENSE",
  "type": "string",
  "anyOf": [
    {
      "not": {
        "pattern": "M[0-9]+D"
      }
    },
    {
      "pattern": "^P(?:[0-9]+Y)?1M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?2M(?:[1-9]|1[0-9]|2[0-9])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?3M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?4M(?:[1-9]|[12][0-9]|30)D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?5M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?6M(?:[1-9]|[12][0-9]|30)D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?7M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?8M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?9M(?:[1-9]|[12][0-9]|30)D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?10M(?:[1-9]|[12][0-9]|3[01])D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?11M(?:[1-9]|[12][0-9]|30)D"
    },
    {
      "pattern": "^P(?:[0-9]+Y)?12M(?:[1-9]|[12][0-9]|3[01])D"
    }
  ],
  "not": {
    "pattern": "^P$"
  },
  "pattern": "^P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?$"
}
